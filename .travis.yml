language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: nginx
  - EC2_REGION: us-east-1
  - secure: piK6Yh/buBDh/ROtaKBISoQVtvoVgHc3mHcmfA24IGqKOBxqQO0ISudxp/M5ByOJaYIumFhpWis7HYYRqjsZxFsZdMiacLx7ZFMwf21iCLFq5rnPBMCf2CKVj82a8DjiUaRB4SgKgcqjngjjr16J3uMjZ8djLyqxVBGOdwIAfes7YiQw8iYFX45DOYPffdrxLx/707sDC8EGRM5ZWmaJWt8VITxBPotYmfyKg5EGwPQv8cUxI/SY1w6P9YXfV1cH8gFov4zDvqYukCpgYWwunUhxTbtc3IODXTBghRbAy/F7V4tmQQDVgUflEHGW8eGM6votZEur6H13xUzzHiDP3tihYgP9qHgLWjEH9wippno3sGhGTynGCnoJPsiuLLT+BPADf82daCmA3DrV+HnyWFuYsor89vo54hGO8cNmZs/t+vKwoWO3BdKBJZw9k/juE8ygudWM3pLCgDYl9y1mHigc2Hl/DGVEtKTlRVrBz5s8/52tjGQSdFrlLm5ZPMjGNJNmEdAF1pElxtNyZNvNGLgHa456E9XnDjQGvOQjYw4xnMB/eRWj7nNZGjnJJHVWzXxe+8I/2eap0unrGHWkY6pAjGIDsMKWGbt8ANzOTjMk1rEaX9v9Wq9JybsV2KzMJHinnH86h5n4HgCjPccjteSvyRvD/tJ7wqi9QG8VRY8=
  - secure: Fz6WcJB5W2kuEztkZaij1ju8c1Iup9ZQ3k/7QRJY791Covl+hjBmTjZkeOHgnVUnsX5OtqB7oE12mSG9JF01N9TFe2gADuaOrIUjvlXmi8U+UEHrmwTgPmvbP7mXhlxe0mpJZQKtMyEYq4hf4Fhal+TSJVVJzHL+sOMCSXANCowKn3IKhwfWWmhG/pbBdip91oP0KGlHgKA92Li+i06mDSKH0SpZYYAMaMY/lxMKZIIIcPzkKePfYIJo6y7nvCeurPN1Mi08echMiXHgTovyg9GfOdDN1tE8J1myL2vh+aJsoNfJNxZcGs0X37d6Cdt5D131l/lWwVWDr8bzBTNev9qBB9S9Qk6IVIir4Kpj7odMnCVfYCJ0BNeScMa4ZKNBKDR1TjNDLvzXo4ztSZ0QSJoLTz3kDrbAJGpqZXXKeieOi92lbOIRoYU4HNmBsmZHQYbJU/TVddfbrvguhvHX6UdotCIptFX8absYSCOPJTc20vZPTBSDZ4keLZdaPXGeX5i1TB111dULBGl+K2J1natFEVU7E+uGYbN/LpNNX9DP+2Ixo88g/3WuOxPimIWcCffpL8EUo6ksdSwBbv/BHLZKSxhIISfe3SXsH8mJVRYom7pTe25mFGYa3GoaSX3Ma2JGsQ1fYFhFAqvtJi/LECf00PBnchvN0WE/VEVXuVQ=
  - secure: aTWvbafHmGJH3WmxYgHi0rOfyqqe3mntDSITDCLyoYN8mc5QcHtsTarYBClyKjt9omwCv52jS0kzlI3eQcIOLBPgHjBxsojmuP3h9KG4lkW4jCpOgPMwvm9flOCWK5cAa54NIsbHsULRshkDZ9ql1QaljQ19rwY/OE9Qvi0vyz7pz+RNtf+fgSgUUaDT4tzmP5EXR5nXPCGx5wNzKWRZGdzgt7uVl7gN10II8y63MWjrJmHWHGlGGxWecG2x17wL73pBb6meeGgQvJ/ZrejtlEV6RBvhwNN+5YNkvQ5yeJ3lvu6f/BYjt/ZHMo9lY9Ry3PmQFFWKFXYYfqwVJimEo6AScnyvn/klpxrQCRZL8MgRZTFhfBICssM37lUH1ZuNwyZkdjv/WSlzhkISCIa1NRNotR43c5zbgWzTbfeyX4Gmqlaw1JwYQ1eolaObH1dfMmnu+ckw2B8ieLQc6XMY5NkT1u9VVFhrWeOFEF5LZaYwq9JLopcPkhaZQu/NKCPHN8v12Ods2a7+o7n1vyPnzQe6oNS3Opa9x/29YEqgiEpoA5qCSA7nvgYf/lEUYsloPQ7lOg18chQ841NJj5kSCkxZ/daZNcj47eaqd4j9byUxP9zy6L4pYaLMhHT0DZviYn8gglAAeCD93j9negW4P1cvJpsxKPP0mIt6K1lta4c=
  - secure: EXtwo4WizaL/xg3gdH3Xr4RxuMZpMeKSIHZyfr5IAwrU8TRpvRduUj+nCnPL+VSbGNqeuD0S3WJtMmw8GuauWZXRD+7mkwDBJWz8wXAmtnyEIwEGD0t8FIHCxJBmxy29UYwn5+f3xaIvwutVFjV1OFLMG0iiBBa/wVuAzgCSrFSND3M0+bBYk7xy0MBKTyc88UOCYnKxixFkH2v3Qd4xKUn7BSrTJFgolQxrsqvcIwRmWE6f7LIvbUPgISSC9KMSN/GcLwqXnZOc9ssu0dDnJg7sjin1qTQeqfB2WyvBqxJfle7kxqeWa1j5cd7EikKiyRg7FjZWszGzNtT/Dc9WceuvFRpvDZ9+kPAErBGwaT4BYuIdz4bB6Mp+P7G2sAMaXYMweqhDI7qfGo1GXP/Dqm5pYCQg4vCVy5Wycir1tcBSFlOqFiyeZMBl5FOst46JoJujXxqRYvZD9mgrD2wgqWOXxhwe78RP1tzf7Ayh2FvvcATWNrTqTvB9eEzxUqWZZTkSLIdKIj63KfHaTS+aCvbR23yeQsYj43XfvVdkjz/j7LvIIoBpGK8tw8WKjk1kfoeBEg5i60STxNLxQIxhQdOARVbIoRpiDYuGZAV4ph6I79vGLKTvpPYQERfi4PNw4q0RdmV6EZUJ+ZKMBxGw1x2fd9eMUkPuwpKyfQerA4s=

install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
